# -*- coding: utf-8 -*-
"""app.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1X-Jho497RQtL6ejVHXpbS2DO5s-TZYkc
"""

# üìÑ app.py ‚Äî CityScope AI Chatbot

import streamlit as st
import pandas as pd
import numpy as np
import joblib
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier  # or whatever model you're using

st.set_page_config(page_title="CityScope AI", layout="centered")

# === Load model and vectorizer ===
model = joblib.load("model.pkl")
vectorizer = joblib.load("vectorizer.pkl")
data = pd.read_excel("cityscopedata.xlsx")

questions = data['Question'].astype(str).tolist()
answers = data['Answer'].astype(str).tolist()

# === Streamlit UI ===
st.set_page_config(page_title="CityScope AI", layout="centered")
st.title("üèôÔ∏è CityScope AI Chatbot")

user_query = st.text_input("Ask something about Tamil Nadu's districts:")

if user_query:
    # Vectorize user query
    query_vec = vectorizer.transform([user_query])

    # Find nearest neighbor
    dist, index = model.kneighbors(query_vec, n_neighbors=1)
    matched_index = index[0][0]

    # Return answer
    st.markdown("### üß† Answer:")
    st.success(answers[matched_index])
